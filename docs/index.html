<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta property="og:site_name" content="GRUPA" />
		<meta property="og:title" content="電子レンジ・ワット時間換算" />
		<meta property="og:description" content="電子レンジの設定時間をワット間で換算します" />
		<meta property="og:type" content="article" />

		<title>電子レンジ・ワット時間換算</title>

		<link rel="shortcut icon" href="https://raw.githubusercontent.com/jdecked/twemoji/refs/heads/main/assets/svg/1f552.svg" type="image/svg+xml" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c" />

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

		<style>
			* { font-family: "M PLUS Rounded 1c"; }
		</style>
	</head>
	<body data-bs-theme="dark">
		<div class="container py-5" style="max-width: 500px;">
			<div class="row my-5">
				<div class="col">
					<div class="input-group input-group-lg">
						<input type="number" name="sourceWottage" id="source-wottage" class="form-control text-end" value="500" min="100" step="100" />
						<label for="source-wottage" class="input-group-text fw-bold">W</label>
						<span class="input-group-text fw-bold bg-primary">→</span>
						<input type="number" name="targetWottage" id="target-wottage" class="form-control text-end" value="600" min="100" step="100" />
						<label for="target-wottage" class="input-group-text fw-bold">W</label>
					</div>
				</div>
			</div>
			<div class="row mb-5">
				<div class="col">
					<div class="input-group input-group-lg">
						<select name="sourceTimeMinute" id="source-time-minute" class="form-select text-end">
							<option value="0" selected>0</option>
							<option value="1">1</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5</option>
							<option value="6">6</option>
							<option value="7">7</option>
							<option value="8">8</option>
							<option value="9">9</option>
							<option value="10">10</option>
							<option value="11">11</option>
							<option value="12">12</option>
							<option value="13">13</option>
							<option value="14">14</option>
							<option value="15">15</option>
							<option value="16">16</option>
							<option value="17">17</option>
							<option value="18">18</option>
							<option value="19">19</option>
							<option value="20">20</option>
							<option value="21">21</option>
							<option value="22">22</option>
							<option value="23">23</option>
							<option value="24">24</option>
							<option value="25">25</option>
							<option value="26">26</option>
							<option value="27">27</option>
							<option value="28">28</option>
							<option value="29">29</option>
							<option value="30">30</option>
							<option value="31">31</option>
							<option value="32">32</option>
							<option value="33">33</option>
							<option value="34">34</option>
							<option value="35">35</option>
							<option value="36">36</option>
							<option value="37">37</option>
							<option value="38">38</option>
							<option value="39">39</option>
							<option value="40">40</option>
							<option value="41">41</option>
							<option value="42">42</option>
							<option value="43">43</option>
							<option value="44">44</option>
							<option value="45">45</option>
							<option value="46">46</option>
							<option value="47">47</option>
							<option value="48">48</option>
							<option value="49">49</option>
							<option value="50">50</option>
							<option value="51">51</option>
							<option value="52">52</option>
							<option value="53">53</option>
							<option value="54">54</option>
							<option value="55">55</option>
							<option value="56">56</option>
							<option value="57">57</option>
							<option value="58">58</option>
							<option value="59">59</option>
						</select>
						<span class="input-group-text fw-bold">：</span>
						<select name="sourceTimeSecond" id="source-time-second" class="form-select text-start">
							<option value="0" selected>00</option>
							<option value="5">05</option>
							<option value="10">10</option>
							<option value="15">15</option>
							<option value="20">20</option>
							<option value="25">25</option>
							<option value="30">30</option>
							<option value="35">35</option>
							<option value="40">40</option>
							<option value="45">45</option>
							<option value="50">50</option>
							<option value="55">55</option>
						</select>
					</div>
				</div>
			</div>
			<div class="row mb-5">
				<div class="col">
					<p id="target-time" class="text-center fs-1 fw-bold">0:00</p>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<p class="text-center"><a href="https://x.com/GrapeColor" target="_blank">@GrapeColor</a></p>
				</div>
			</div>
		</div>

		<script>
			const sourceWottage = document.getElementById("source-wottage");
			const targetWottage = document.getElementById("target-wottage");
			const sourceTimeMinute = document.getElementById("source-time-minute");
			const sourceTimeSecond = document.getElementById("source-time-second");
			const targetTimeText = document.getElementById("target-time");

			// 初期値設定
			const cookieMap = new Map(document.cookie.split('; ').map((pair) => pair.split('=')));
			sourceWottage.value = cookieMap.get('sourceWottage') ?? '500';
			targetWottage.value = cookieMap.get('targetWottage') ?? '600';
			sourceTimeMinute.value = cookieMap.get('sourceTimeMinute') ?? '0';
			sourceTimeSecond.value = cookieMap.get('sourceTimeSecond') ?? '0';

			const setCookies = () => {
				document.cookie = [...cookieMap.entries()].map(([k, v]) => `${k}=${v}`).join('; ');
			}

			const drawTargetTime = () => {
				const sourceTime = parseInt(sourceTimeMinute.value) * 60 + parseInt(sourceTimeSecond.value);
				const weight = parseInt(sourceWottage.value) / parseInt(targetWottage.value);
	
				const targetTime = Math.round(sourceTime * weight);
				const targetTimeMinute = (Math.trunc(targetTime / 60)).toString();
				const targetTimeSecond = (targetTime % 60).toString();
	
				targetTimeText.textContent = Number.isNaN(targetTime) ? '0:00' : `${targetTimeMinute}:${targetTimeSecond.padStart(2, '0')}`;

				cookieMap.set('sourceWottage', sourceWottage.value);
				cookieMap.set('targetWottage', targetWottage.value);
				cookieMap.set('sourceTimeMinute', sourceTimeMinute.value);
				cookieMap.set('sourceTimeSecond', sourceTimeSecond.value);
				setCookies();
			}

			sourceWottage.addEventListener('change', () => drawTargetTime());
			targetWottage.addEventListener('change', () => drawTargetTime());
			sourceTimeMinute.addEventListener('change', () => drawTargetTime());
			sourceTimeSecond.addEventListener('change', () => drawTargetTime());
		</script>
	</body>
</html>
